{% extends "base.html" %}
{% block title %}Envanter Ekle{% endblock %}
{% block content %}
<form method="post">
<section id="urun-ekle" class="container-fluid p-3">
  <h5 class="mb-3">Ürün / Envanter Ekle</h5>

  <div class="row g-4">

    <div class="col-md-6">
      <label class="form-label">Kullanım Alanı</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtKullanimAlani" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="kullanim-alani" data-target-text="txtKullanimAlani" data-target-hidden="kullanim_alani" data-label="Kullanım Alanı">&#9776;</button>
      </div>
      <input type="hidden" name="kullanim_alani" id="kullanim_alani">
    </div>

    <div class="col-md-6">
      <label class="form-label">Lisans Adı</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtLisansAdi" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="lisans-adi" data-target-text="txtLisansAdi" data-target-hidden="lisans_adi" data-label="Lisans Adı">&#9776;</button>
      </div>
      <input type="hidden" name="lisans_adi" id="lisans_adi">
    </div>

    <div class="col-md-6">
      <label class="form-label">Donanım Tipi</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtDonanimTipi" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="donanim-tipi" data-target-text="txtDonanimTipi" data-target-hidden="donanim_tipi" data-label="Donanım Tipi">&#9776;</button>
      </div>
      <input type="hidden" name="donanim_tipi" id="donanim_tipi">
    </div>

    <div class="col-md-6">
      <label class="form-label">Marka</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtMarka" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="marka" data-target-text="txtMarka" data-target-hidden="marka" data-label="Marka">&#9776;</button>
      </div>
      <input type="hidden" name="marka" id="marka">
    </div>

    <div class="col-md-6">
      <label class="form-label">Model</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtModel" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="model" data-target-text="txtModel" data-target-hidden="model" data-label="Model">&#9776;</button>
      </div>
      <input type="hidden" name="model" id="model">
    </div>

    <div class="col-md-6">
      <label class="form-label">Fabrika</label>
      <div class="input-group input-group-sm">
        <input type="text" id="txtFabrika" class="form-control" readonly placeholder="Seçilmedi">
        <button type="button" class="btn btn-outline-secondary picker-btn" data-entity="fabrika" data-target-text="txtFabrika" data-target-hidden="fabrika" data-label="Fabrika">&#9776;</button>
      </div>
      <input type="hidden" name="fabrika" id="fabrika">
    </div>

  </div>

  <div class="mt-3">
    <button class="btn btn-primary btn-sm">Kaydet</button>
    <a href="/inventory" class="btn btn-outline-secondary btn-sm">İptal</a>
  </div>
</section>
</form>

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.picker-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const entity = btn.dataset.entity;
      const targetTextId = btn.dataset.targetText;
      const targetHiddenId = btn.dataset.targetHidden;
      const label = btn.dataset.label || 'Seç';
      const markaGetter = entity === 'model' ? () => document.getElementById('marka').value : null;
      openPicker({
        entity,
        label,
        targetTextId,
        targetHiddenId,
        markaGetter
      });
    });
  });
});
</script>
{% endblock %}

