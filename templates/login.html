{% extends "base.html" %}
{% block title %}Giriş Yap{% endblock %}
{% block content %}
  <div class="d-flex justify-content-center align-items-center position-relative" style="min-height:70vh; z-index:2;">
    <div class="card soft-card p-4" style="max-width: 380px; width:100%;">
      <h1 class="h5 text-center mb-3">HOŞ GELDİNİZ</h1>

      {% if error %}
        <div class="alert alert-danger py-2 small">{{ error }}</div>
      {% endif %}

      <form method="post" action="/login" autocomplete="on">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
        <div class="mb-3">
          <label class="form-label" for="username">Kullanıcı Adı</label>
          <input id="username" name="username" type="text" class="form-control" required autofocus value="{{ saved_username }}">
        </div>
        <div class="mb-3">
          <label class="form-label" for="password">Parola</label>
          <input id="password" name="password" type="password" class="form-control" required>
        </div>
        <div class="mb-3 form-check">
          <input class="form-check-input" type="checkbox" value="1" id="remember" name="remember" {% if saved_username %}checked{% endif %}>
          <label class="form-check-label small" for="remember">Beni hatırla</label>
        </div>
        <button class="btn btn-primary w-100" type="submit">Giriş Yap</button>
      </form>
    </div>
  </div>

  <div id="tsparticles"></div>
  <style>
    html, body { height:100%; background:#0b1324; }
    #tsparticles{
      position:fixed; inset:0; width:100%; height:100%;
      z-index:1;
    }
    @media (prefers-reduced-motion: reduce){
      #tsparticles{ display:none; }
    }
  </style>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/tsparticles@3/tsparticles.bundle.min.js" defer></script>
<script defer>
document.addEventListener("DOMContentLoaded", async () => {
  await tsParticles.load({
    id: "tsparticles",
    options: {
      background: { color: "#0b1324" },
      fpsLimit: 60,
      detectRetina: true,
      fullScreen: { enable: false },
      particles: {
        number: { value: 40, density: { enable: true, area: 800 } },
        color: { value: "#9ecbff" },
        shape: { type: "circle" },
        opacity: { value: 0.5 },
        size: { value: { min: 1, max: 3 } },
        links: { enable: true, color: "#5da9ff", opacity: 0.35, distance: 120, width: 1 },
        move: { enable: true, speed: 1.1, outModes: { default: "out" } }
      },
      interactivity: {
        events: {
          onHover: { enable: true, mode: "grab" },
          resize: true
        },
        modes: {
          grab: { distance: 120, links: { opacity: 0.6 } }
        }
      }
    }
  });
});
</script>
{% endblock %}
