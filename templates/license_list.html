{% extends "base.html" %}
{% block title %}Lisanslar{% endblock %}
{% block content %}
<div class="container-fluid p-3">
  <div class="d-flex justify-content-between mb-3">
    <h5>Lisanslar</h5>
    <a class="btn btn-primary btn-sm" href="{{ url_for('license_new') }}">Yeni Lisans</a>
  </div>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Lisans Adı</th>
          <th>Vendor</th>
          <th>Son Kullanma</th>
          <th>Anahtar</th>
          <th>Envanter</th>
          <th>İşlem</th>
        </tr>
      </thead>
      <tbody>
        {% for lic in rows %}
        <tr data-href="{{ url_for('license_detail', id=lic.id) }}">
          <td>{{ lic.adi }}</td>
          <td>{{ lic.vendor or '-' }}</td>
          <td>{{ lic.son_kullanma|date('Y-MM-dd') if lic.son_kullanma else '-' }}</td>
          <td class="text-monospace">{{ lic.anahtar or '-' }}</td>
          <td>
            {% if lic.inventory %}
              <a href="{{ url_for('inventory_detail', id=lic.inventory.id) }}" onclick="stopRowClick(event)">{{ lic.inventory.no }}</a>
            {% else %}
              -
            {% endif %}
          </td>
          <td>
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('license_edit', id=lic.id) }}" onclick="stopRowClick(event)">Düzenle</a>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="6" class="text-muted">Kayıt yok</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
