{% extends "base.html" %} {% block title %}Ürün Ekle{% endblock %} {% block
content %}
<section id="urun-ekle">
  <h5 class="mb-3">Ürün / Envanter Ekle</h5>

  <div class="actions-grid">
    <!-- Kullanım Alanı -->
    <div class="pick-item">
      <div class="pick-label">
        Kullanım Alanı
        <span class="pick-chip d-none" data-for="kullanim_alani"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="kullanim_alani"
        aria-label="Kullanım Alanı"
      >
        ≡
      </button>
      <input type="hidden" name="kullanim_alani" id="kullanim_alani" />
    </div>

    <!-- Lisans Adı -->
    <div class="pick-item">
      <div class="pick-label">
        Lisans Adı
        <span class="pick-chip d-none" data-for="lisans_adi"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="lisans_adi"
        aria-label="Lisans Adı"
      >
        ≡
      </button>
      <input type="hidden" name="lisans_adi" id="lisans_adi" />
    </div>

    <!-- Fabrika -->
    <div class="pick-item">
      <div class="pick-label">
        Fabrika
        <span class="pick-chip d-none" data-for="fabrika"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="fabrika"
        aria-label="Fabrika"
      >
        ≡
      </button>
      <input type="hidden" name="fabrika" id="fabrika" />
    </div>

    <!-- Donanım Tipi -->
    <div class="pick-item">
      <div class="pick-label">
        Donanım Tipi
        <span class="pick-chip d-none" data-for="donanim_tipi"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="donanim_tipi"
        aria-label="Donanım Tipi"
      >
        ≡
      </button>
      <input type="hidden" name="donanim_tipi" id="donanim_tipi" />
    </div>

    <!-- Marka -->
    <div class="pick-item">
      <div class="pick-label">
        Marka
        <span class="pick-chip d-none" data-for="marka"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="marka"
        aria-label="Marka"
      >
        ≡
      </button>
      <input type="hidden" name="marka" id="marka" />
    </div>

    <!-- Model -->
    <div class="pick-item">
      <div class="pick-label">
        Model
        <span class="pick-chip d-none" data-for="model"></span>
      </div>
      <button
        type="button"
        class="pick-btn"
        data-entity="model"
        aria-label="Model"
      >
        ≡
      </button>
      <input type="hidden" name="model" id="model" />
    </div>
  </div>
</section>

<!-- ====== MINI PICKER MODAL (küçük ekran) ====== -->
<div id="picker-modal" class="picker-modal" hidden>
  <div class="picker-card">
    <div class="picker-head">
      <strong id="picker-title">Seçim</strong>
      <button type="button" class="picker-close" aria-label="Kapat">×</button>
    </div>

    <div class="picker-search">
      <input
        id="picker-search"
        type="text"
        placeholder="Ara / yeni değer yaz..."
      />
      <button type="button" class="picker-add" id="picker-add">Ekle</button>
    </div>

    <div id="picker-list" class="picker-list"><!-- JS doldurur --></div>

    <div class="picker-foot">
      <button type="button" class="btn btn-light" id="picker-cancel">
        Kapat
      </button>
    </div>
  </div>
</div>

<style>
  /* Kart ızgarası */
  #urun-ekle .actions-grid {
    display: grid;
    gap: 16px 24px;
    grid-template-columns: repeat(3, minmax(220px, 1fr));
  }
  @media (max-width: 1200px) {
    #urun-ekle .actions-grid {
      grid-template-columns: repeat(2, minmax(220px, 1fr));
    }
  }
  @media (max-width: 640px) {
    #urun-ekle .actions-grid {
      grid-template-columns: 1fr;
    }
  }
  #urun-ekle .pick-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    background: #fff;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.04);
  }
  #urun-ekle .pick-label {
    font-weight: 600;
    color: #111827;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  #urun-ekle .pick-chip {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: 999px;
    background: #eef2ff;
    color: #3730a3;
  }
  #urun-ekle .pick-btn {
    width: 48px;
    height: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #d1d5db;
    border-radius: 12px;
    background: #f9fafb;
    transition: all 0.15s ease;
    font-size: 20px;
    line-height: 1;
  }
  #urun-ekle .pick-btn:hover {
    background: #f3f4f6;
    transform: translateY(-1px);
  }
  #urun-ekle .pick-btn:active {
    transform: translateY(0);
  }

  /* Mini modal */
  .picker-modal {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(15, 23, 42, 0.4);
    z-index: 1085;
  }
  .picker-card {
    width: 420px;
    max-width: 92vw;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
    overflow: hidden;
  }
  .picker-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    border-bottom: 1px solid #eef2f7;
  }
  .picker-close {
    border: 0;
    background: transparent;
    font-size: 22px;
    line-height: 1;
    cursor: pointer;
    padding: 2px 6px;
  }
  .picker-search {
    display: flex;
    gap: 8px;
    align-items: center;
    padding: 10px 14px;
    border-bottom: 1px solid #eef2f7;
  }
  .picker-search input {
    flex: 1 1 auto;
    padding: 10px 12px;
    border: 1px solid #dbe2ea;
    border-radius: 10px;
  }
  .picker-add {
    flex: 0 0 auto;
    padding: 9px 14px;
    border: 1px solid #16a34a;
    background: #16a34a;
    color: #fff;
    border-radius: 10px;
    cursor: pointer;
  }
  .picker-add:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .picker-list {
    max-height: 320px;
    overflow: auto;
  }
  .picker-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    border-bottom: 1px dashed #eef2f7;
  }
  .picker-row:nth-child(even) {
    background: #fafbff;
  }
  .picker-name {
    margin: 0;
    font-size: 14px;
  }
  .picker-actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .picker-select {
    border: 1px solid #d1d5db;
    background: #f9fafb;
    border-radius: 8px;
    padding: 6px 10px;
    cursor: pointer;
  }
  .picker-del {
    border: 1px solid #ef4444;
    background: #fff;
    color: #ef4444;
    border-radius: 999px;
    width: 28px;
    height: 28px;
    line-height: 1;
    font-weight: 700;
  }
  .picker-del:hover {
    background: #fee2e2;
  }
  .picker-empty {
    padding: 14px;
    color: #6b7280;
    font-size: 14px;
  }
  .picker-foot {
    padding: 10px 14px;
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    border-top: 1px solid #eef2f7;
  }
</style>

<script src="{{ url_for('static', path='js/mini-picker.js') }}"></script>
{% endblock %}
