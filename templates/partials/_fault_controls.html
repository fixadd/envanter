{% set prefix = fault_prefix or fault_entity %}
<div
  class="d-flex align-items-center"
  data-fault-entity="{{ fault_entity }}"
  data-fault-prefix="{{ prefix }}"
  data-fault-label="{{ fault_label or '' }}"
>
  <button
    type="button"
    class="btn btn-warning btn-sm d-flex align-items-center gap-2"
    data-fault-summary-trigger
  >
    <i class="bi bi-exclamation-triangle"></i>
    <span>Arızalı Durum</span>
    <span class="badge text-bg-dark" data-fault-count>0</span>
  </button>
</div>

<div
  class="modal fade"
  id="{{ prefix }}FaultSummaryModal"
  tabindex="-1"
  aria-hidden="true"
  data-fault-modal="summary"
  data-fault-prefix="{{ prefix }}"
>
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ fault_label or 'Arızalı Kayıtlar' }}</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Kapat"
        ></button>
      </div>
      <div class="modal-body">
        <div class="fault-summary-list" data-fault-list>
          <div class="text-muted small">Kayıt bulunamadı.</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="{{ prefix }}FaultMarkModal"
  tabindex="-1"
  aria-hidden="true"
  data-fault-modal="mark"
  data-fault-prefix="{{ prefix }}"
>
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <form class="modal-content fault-modal" data-fault-mark-form>
      <div class="modal-header">
        <h5 class="modal-title">Arızalı İşaretle</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Kapat"
        ></button>
      </div>
      <div class="modal-body">
        <input type="hidden" name="entity" value="{{ fault_entity }}" />
        <input type="hidden" name="entity_id" data-fault-input="entity-id" />
        <input type="hidden" name="entity_key" data-fault-input="entity-key" />
        <input type="hidden" name="title" data-fault-input="title" />
        <input type="hidden" name="meta" data-fault-input="meta" />
        <div class="mb-3">
          <label class="form-label">Arızalı Cihaz No</label>
          <input
            type="text"
            class="form-control form-control-sm"
            name="device_no"
            data-fault-input="device"
            readonly
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Açıklama</label>
          <textarea
            class="form-control form-control-sm"
            rows="3"
            name="note"
            data-fault-input="note"
            placeholder="Hızlı açıklama"
          ></textarea>
        </div>
        <div class="d-flex justify-content-end gap-2">
          <button
            type="button"
            class="btn btn-outline-secondary btn-sm"
            data-bs-dismiss="modal"
          >
            Vazgeç
          </button>
          <button type="submit" class="btn btn-primary btn-sm">Kaydet</button>
        </div>
      </div>
    </form>
  </div>
</div>
