{% macro inventory_form_fields(mode='create', item=None) %} {% set is_edit =
mode == 'edit' %} {% set item = item or {} %}
<div
  class="row g-3"
  id="{{ 'inventory-edit-grid' if is_edit else 'envanter-ekle' }}"
>
  <div class="col-12 col-lg-6">
    <label
      for="{{ 'inventoryNo' if is_edit else 'envanterNo' }}"
      class="form-label"
      >Envanter No</label
    >
    {% if is_edit %}
    <input
      id="inventoryNo"
      type="text"
      class="form-control"
      value="{{ item.no if item else '' }}"
      readonly
    />
    {% else %}
    <input
      id="envanterNo"
      name="envanter_no"
      type="text"
      class="form-control"
      required
      placeholder="ENV-000123"
    />
    {% endif %}
  </div>

  <div class="col-12 col-lg-6">
    <label
      for="{{ 'inventoryName' if is_edit else 'bilgisayarAdi' }}"
      class="form-label"
      >Bilgisayar Adı</label
    >
    <input
      id="{{ 'inventoryName' if is_edit else 'bilgisayarAdi' }}"
      name="bilgisayar_adi"
      type="text"
      class="form-control"
      value="{{ (item.bilgisayar_adi if item else '') or '' }}"
      placeholder="{{ 'Örn. BT-WS-01' if is_edit else 'PC-OFIS-01' }}"
      {%
      if
      not
      is_edit
      %}required{%
      endif
      %}
    />
  </div>

  {% if is_edit %}
  <div class="col-12 col-lg-6">
    <label for="edit_fabrika_display" class="form-label">Fabrika</label>
    <input type="hidden" id="edit_fabrika_id" />
    <div class="input-group">
      <input
        id="edit_fabrika_display"
        name="fabrika"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.fabrika if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="fabrika"
        data-target="edit_fabrika_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="fabrika"
        data-target="edit_fabrika_id"
        data-display="edit_fabrika_display"
        aria-label="Fabrika seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  <div class="col-12 col-lg-6">
    <label for="edit_departman_display" class="form-label">Departman</label>
    <input type="hidden" id="edit_departman_id" />
    <div class="input-group">
      <input
        id="edit_departman_display"
        name="departman"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.departman if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="departman"
        data-target="edit_departman_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="departman"
        data-target="edit_departman_id"
        data-display="edit_departman_display"
        aria-label="Departman seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  {% else %}
  <div class="col-12 col-lg-6">
    <label class="form-label" for="fabrika">Fabrika</label>
    <select id="fabrika" name="fabrika" class="form-select" required></select>
  </div>
  <div class="col-12 col-lg-6">
    <label class="form-label" for="departman">Departman</label>
    <select
      id="departman"
      name="departman"
      class="form-select"
      required
    ></select>
  </div>
  {% endif %} {% if is_edit %}
  <div class="col-12 col-lg-6">
    <label for="edit_donanim_display" class="form-label">Donanım Tipi</label>
    <input type="hidden" id="edit_donanim_id" />
    <div class="input-group">
      <input
        id="edit_donanim_display"
        name="donanim_tipi"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.donanim_tipi if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="donanim_tipi"
        data-target="edit_donanim_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="donanim_tipi"
        data-target="edit_donanim_id"
        data-display="edit_donanim_display"
        aria-label="Donanım tipi seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  <div class="col-12 col-lg-6">
    <label for="edit_sorumlu_display" class="form-label"
      >Sorumlu Personel</label
    >
    <input type="hidden" id="edit_sorumlu_id" />
    <div class="input-group">
      <input
        id="edit_sorumlu_display"
        name="sorumlu_personel"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.sorumlu_personel if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="sorumlu_personel"
        data-target="edit_sorumlu_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="sorumlu_personel"
        data-target="edit_sorumlu_id"
        data-display="edit_sorumlu_display"
        aria-label="Sorumlu personel seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  {% else %}
  <div class="col-12 col-lg-6">
    <label class="form-label" for="donanim_tipi">Donanım Tipi</label>
    <select
      id="donanim_tipi"
      name="donanim_tipi"
      class="form-select"
      required
    ></select>
  </div>
  <div class="col-12 col-lg-6">
    <label class="form-label" for="sorumlu_personel">Sorumlu Personel</label>
    <select
      id="sorumlu_personel"
      name="sorumlu_personel"
      class="form-select"
      required
    ></select>
  </div>
  {% endif %} {% if is_edit %}
  <div class="col-12 col-lg-6">
    <label for="edit_marka_display" class="form-label">Marka</label>
    <input type="hidden" id="edit_marka_id" />
    <div class="input-group">
      <input
        id="edit_marka_display"
        name="marka"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.marka if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="marka"
        data-target="edit_marka_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="marka"
        data-target="edit_marka_id"
        data-display="edit_marka_display"
        aria-label="Marka seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  <div class="col-12 col-lg-6">
    <label for="edit_model_display" class="form-label">Model</label>
    <input type="hidden" id="edit_model_id" data-store="id" />
    <div class="input-group">
      <input
        id="edit_model_display"
        name="model"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.model if item else '') or '' }}"
        placeholder="Önce marka seçiniz..."
        readonly
        data-entity="model"
        data-target="edit_model_id"
        data-parent="edit_marka_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="model"
        data-target="edit_model_id"
        data-display="edit_model_display"
        data-parent="edit_marka_id"
        aria-label="Model seç"
        disabled
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  {% else %}
  <div class="col-12 col-lg-6">
    <label class="form-label" for="marka">Marka</label>
    <select id="marka" name="marka" class="form-select" required></select>
  </div>
  <div class="col-12 col-lg-6">
    <label class="form-label" for="model">Model</label>
    <select id="model" name="model" class="form-select" required disabled>
      <option value="">Önce marka seçiniz...</option>
    </select>
  </div>
  {% endif %}

  <div class="col-12 col-lg-6">
    <label
      for="{{ 'inventorySerial' if is_edit else 'seriNo' }}"
      class="form-label"
      >Seri No</label
    >
    <input
      id="{{ 'inventorySerial' if is_edit else 'seriNo' }}"
      name="seri_no"
      type="text"
      class="form-control"
      value="{{ (item.seri_no if item else '') or '' }}"
      placeholder="{{ 'Seri numarası' if is_edit else 'SN123456789' }}"
      {%
      if
      not
      is_edit
      %}required{%
      endif
      %}
    />
  </div>

  {% if not is_edit %}
  <div class="col-12 col-lg-6">
    <label class="form-label" for="ifsNo"
      >IFS No <span class="text-muted">(zorunlu değil)</span></label
    >
    <input
      id="ifsNo"
      name="ifs_no"
      type="text"
      class="form-control"
      placeholder="IFS-..."
    />
  </div>
  {% else %}
  <div class="col-12 col-lg-6">
    <label for="inventoryIfs" class="form-label">IFS No</label>
    <input
      id="inventoryIfs"
      name="ifs_no"
      type="text"
      class="form-control"
      value="{{ (item.ifs_no if item else '') or '' }}"
      placeholder="IFS referansı"
    />
  </div>
  {% endif %} {% if is_edit %}
  <div class="col-12 col-lg-6">
    <label for="edit_kullanim_display" class="form-label">Kullanım Alanı</label>
    <input type="hidden" id="edit_kullanim_id" />
    <div class="input-group">
      <input
        id="edit_kullanim_display"
        name="kullanim_alani"
        type="text"
        class="form-control lookup-display"
        value="{{ (item.kullanim_alani if item else '') or '' }}"
        placeholder="Seçiniz..."
        readonly
        data-entity="kullanim_alani"
        data-target="edit_kullanim_id"
      />
      <button
        type="button"
        class="btn btn-outline-secondary pick-btn"
        data-entity="kullanim_alani"
        data-target="edit_kullanim_id"
        data-display="edit_kullanim_display"
        aria-label="Kullanım alanı seç"
      >
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
  {% endif %} {% if is_edit %}
  <div class="col-12 col-lg-6">
    <label for="inventoryLinked" class="form-label">Bağlı Envanter No</label>
    <input
      id="inventoryLinked"
      name="bagli_envanter_no"
      type="text"
      class="form-control"
      value="{{ (item.bagli_envanter_no if item else '') or '' }}"
      placeholder="Varsa bağlı envanter"
    />
  </div>
  {% else %}
  <div class="col-12 col-lg-6">
    <label class="form-label" for="bagliMakina"
      >Bağlı Makina No <span class="text-muted">(zorunlu değil)</span></label
    >
    <input
      id="bagliMakina"
      name="bagli_makina_no"
      type="text"
      class="form-control"
      placeholder="Makina No"
    />
  </div>
  {% endif %} {% if not is_edit %}
  <div class="col-12">
    <label class="form-label" for="notlar"
      >Not <span class="text-muted">(zorunlu değil)</span></label
    >
    <textarea
      id="notlar"
      name="notlar"
      class="form-control"
      rows="2"
      placeholder="Açıklama / notlar"
    ></textarea>
  </div>
  {% else %}
  <div class="col-12">
    <label for="inventoryNote" class="form-label">Not</label>
    <textarea
      id="inventoryNote"
      name="not"
      class="form-control"
      rows="3"
      placeholder="Envanterle ilgili önemli notları girin"
    >
{{ (item.not_ if item and item.not_ is not none else '') }}</textarea
    >
  </div>
  {% endif %}
</div>
{% endmacro %}
